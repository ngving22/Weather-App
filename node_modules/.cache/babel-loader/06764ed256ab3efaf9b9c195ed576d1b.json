{"ast":null,"code":"import _regeneratorRuntime from\"/Users/andrewng/Desktop/react-app/react-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/andrewng/Desktop/react-app/react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"/Users/andrewng/Desktop/react-app/react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{DateTime}from\"luxon\";var API_KEY='51b402f0ef8809ca59b9787b60abd7e6';var BASE_URL='https://api.openweathermap.org/data/2.5';var getWeatherData=function getWeatherData(infoType,searchParams){var url=new URL(BASE_URL+'/'+infoType);url.search=new URLSearchParams(_objectSpread(_objectSpread({},searchParams),{},{appid:API_KEY}));return fetch(url).then(function(res){return res.json();}).then(function(data){return data;});};var formatCurrentWeather=function formatCurrentWeather(data){var _data$coord=data.coord,lat=_data$coord.lat,lon=_data$coord.lon,_data$main=data.main,temp=_data$main.temp,feels_like=_data$main.feels_like,temp_min=_data$main.temp_min,temp_max=_data$main.temp_max,humidity=_data$main.humidity,name=data.name,dt=data.dt,_data$sys=data.sys,country=_data$sys.country,sunrise=_data$sys.sunrise,sunset=_data$sys.sunset,weather=data.weather,speed=data.wind.speed;var _weather$=weather[0],details=_weather$.main,icon=_weather$.icon;return{lat:lat,lon:lon,temp:temp,feels_like:feels_like,temp_min:temp_min,temp_max:temp_max,humidity:humidity,name:name,dt:dt,country:country,sunrise:sunrise,sunset:sunset,details:details,icon:icon,speed:speed};};var formatForecastWeather=function formatForecastWeather(data){var timezone=data.timezone,daily=data.daily,hourly=data.hourly;daily=daily.slice(1,6).map(function(d){return{title:formatToLocalTime(d.dt,timezone,'ccc'),temp:d.temp.day,icon:d.weather[0].icon};});hourly=hourly.slice(1,6).map(function(d){return{title:formatToLocalTime(d.dt,timezone,'hh:mm a'),temp:d.temp,icon:d.weather[0].icon};});return{timezone:timezone,daily:daily,hourly:hourly};};var getFormattedWeatherData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(searchParams){var formattedCurrentWeather,lat,lon,formattedForecastWeather;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getWeatherData('weather',searchParams).then(formatCurrentWeather);case 2:formattedCurrentWeather=_context.sent;lat=formattedCurrentWeather.lat,lon=formattedCurrentWeather.lon;_context.next=6;return getWeatherData('onecall',{lat:lat,lon:lon,exlude:'current, minutely, alerts',units:searchParams.units}).then(formatForecastWeather);case 6:formattedForecastWeather=_context.sent;return _context.abrupt(\"return\",_objectSpread(_objectSpread({},formattedCurrentWeather),formattedForecastWeather));case 8:case\"end\":return _context.stop();}}},_callee);}));return function getFormattedWeatherData(_x){return _ref.apply(this,arguments);};}();var formatToLocalTime=function formatToLocalTime(secs,zone){var format=arguments.length>2&&arguments[2]!==undefined?arguments[2]:\"cccc, dd LLL yyyy' | Local time: 'hh:mm a\";return DateTime.fromSeconds(secs).setZone(zone).toFormat(format);};var iconUrlFromCode=function iconUrlFromCode(code){return\"http://openweathermap.org/img/wn/\".concat(code,\"@2x.png\");};export default getFormattedWeatherData;export{formatToLocalTime,iconUrlFromCode};","map":{"version":3,"names":["DateTime","API_KEY","BASE_URL","getWeatherData","infoType","searchParams","url","URL","search","URLSearchParams","appid","fetch","then","res","json","data","formatCurrentWeather","coord","lat","lon","main","temp","feels_like","temp_min","temp_max","humidity","name","dt","sys","country","sunrise","sunset","weather","speed","wind","details","icon","formatForecastWeather","timezone","daily","hourly","slice","map","d","title","formatToLocalTime","day","getFormattedWeatherData","formattedCurrentWeather","exlude","units","formattedForecastWeather","secs","zone","format","fromSeconds","setZone","toFormat","iconUrlFromCode","code"],"sources":["/Users/andrewng/Desktop/react-app/react-app/src/Services/weatherService.js"],"sourcesContent":["import { DateTime } from \"luxon\";\n\nconst API_KEY='51b402f0ef8809ca59b9787b60abd7e6';\nconst BASE_URL='https://api.openweathermap.org/data/2.5'\n\n\nconst getWeatherData =(infoType, searchParams) => {\n    const url = new URL(BASE_URL + '/' + infoType)\n    url.search = new URLSearchParams({...searchParams, appid:API_KEY})\n\n\n    return fetch(url)\n        .then((res) => res.json())\n        .then((data) => data);\n}\n\nconst formatCurrentWeather = (data) => {\n    const {\n        coord: {lat, lon},\n        main: {temp, feels_like, temp_min, temp_max, humidity},\n        name,\n        dt,\n        sys: {country, sunrise, sunset},\n        weather,\n        wind: {speed}\n    } = data\n\n    const {main: details, icon} = weather[0]\n\n    return {lat, lon, temp, feels_like, temp_min, temp_max,\n    humidity, name, dt, country, sunrise, sunset, details, icon, speed}\n}\n\nconst formatForecastWeather =(data) => {\n    let {timezone, daily, hourly} = data;\n    daily = daily.slice(1,6).map(d => {\n        return {\n            title: formatToLocalTime(d.dt, timezone, 'ccc'),\n            temp: d.temp.day,\n            icon: d.weather[0].icon,\n        }\n    })\n\n    hourly = hourly.slice(1,6).map(d => {\n        return {\n            title: formatToLocalTime(d.dt, timezone, 'hh:mm a'),\n            temp: d.temp,\n            icon: d.weather[0].icon,\n        }\n    })\n\n    return {timezone, daily, hourly};\n\n}\n\nconst getFormattedWeatherData = async (searchParams) => {\n    const formattedCurrentWeather = await getWeatherData('weather', searchParams).then(formatCurrentWeather)\n\n    const {lat, lon}=formattedCurrentWeather\n    const formattedForecastWeather = await getWeatherData('onecall', {\n        lat, lon, exlude: 'current, minutely, alerts', units: searchParams.units,\n    }).then(formatForecastWeather)\n\n    return {...formattedCurrentWeather, ...formattedForecastWeather}\n}\n\nconst formatToLocalTime = (\n    secs, \n    zone, \n    format = \"cccc, dd LLL yyyy' | Local time: 'hh:mm a\"\n    ) => DateTime.fromSeconds(secs).setZone(zone).toFormat(format)\n\nconst iconUrlFromCode = (code) => `http://openweathermap.org/img/wn/${code}@2x.png`\n\nexport default getFormattedWeatherData\n\nexport {formatToLocalTime, iconUrlFromCode}"],"mappings":"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"},"metadata":{},"sourceType":"module"}